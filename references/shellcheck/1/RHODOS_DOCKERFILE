FROM haskell:8.10.7

WORKDIR /build
COPY . .

RUN cabal update
RUN cabal build Paths_ShellCheck && \
  ghc -optl-static -optl-pthread -isrc -idist/build/autogen --make shellcheck -split-sections -optc-Wl,--gc-sections -optlo-Os && \
  strip --strip-all shellcheck
RUN cabal test
