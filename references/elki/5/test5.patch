From b168b40b2ae47e646259dadfdd4da654a35137fc Mon Sep 17 00:00:00 2001
From: lapplislazuli <Leonhard.Applis@Protonmail.com>
Date: Tue, 15 Jun 2021 08:36:06 +0200
Subject: [PATCH] test5

---
 .../test/java/elki/clustering/kmeans/ShallotKMeansTest.java   | 11 +++++++++++
 1 file changed, 11 insertions(+)

diff --git a/elki-clustering/src/test/java/elki/clustering/kmeans/ShallotKMeansTest.java b/elki-clustering/src/test/java/elki/clustering/kmeans/ShallotKMeansTest.java
index dac26cf65..8e76d02d0 100644
--- a/elki-clustering/src/test/java/elki/clustering/kmeans/ShallotKMeansTest.java
+++ b/elki-clustering/src/test/java/elki/clustering/kmeans/ShallotKMeansTest.java
@@ -44,4 +44,15 @@ public class ShallotKMeansTest extends AbstractClusterAlgorithmTest {
     assertFMeasure(db, result, 0.998005);
     assertClusterSizes(result, new int[] { 199, 200, 200, 200, 201 });
   }
+  
+    // Tests Issue 87
+    @Test
+    public void testKMeansExponion_SingleCluster_shouldPutAllInOneCluster() {
+        Database db = makeSimpleDatabase(UNITTEST + "different-densities-2d-no-noise.ascii", 1000);
+        Clustering<?> result = new ELKIBuilder<ShallotKMeans<DoubleVector>>(ShallotKMeans.class) //
+                .with(KMeans.K_ID, 1) //
+                .with(KMeans.SEED_ID, 7) //
+                .build().autorun(db);
+        assertClusterSizes(result, new int[] { 1000 });
+    }
 }
-- 
2.14.2.windows.3

