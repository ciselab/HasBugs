From 2361156d202ac2b59d5e478298a37206a54e887f Mon Sep 17 00:00:00 2001
From: lapplislazuli <Leonhard.Applis@Protonmail.com>
Date: Tue, 15 Jun 2021 08:26:39 +0200
Subject: [PATCH] test3

---
 .../test/java/elki/clustering/kmeans/HamerlyKMeansTest.java   | 11 +++++++++++
 1 file changed, 11 insertions(+)

diff --git a/elki-clustering/src/test/java/elki/clustering/kmeans/HamerlyKMeansTest.java b/elki-clustering/src/test/java/elki/clustering/kmeans/HamerlyKMeansTest.java
index 22826e78e..4d32177bf 100644
--- a/elki-clustering/src/test/java/elki/clustering/kmeans/HamerlyKMeansTest.java
+++ b/elki-clustering/src/test/java/elki/clustering/kmeans/HamerlyKMeansTest.java
@@ -45,4 +45,15 @@ public class HamerlyKMeansTest extends AbstractClusterAlgorithmTest {
     assertFMeasure(db, result, 0.998005);
     assertClusterSizes(result, new int[] { 199, 200, 200, 200, 201 });
   }
+
+    // Tests Issue 87
+    @Test
+    public void testKMeansHamerly_SingleCluster_shouldPutAllInOneCluster() {
+        Database db = makeSimpleDatabase(UNITTEST + "different-densities-2d-no-noise.ascii", 1000);
+        Clustering<?> result = new ELKIBuilder<HamerlyKMeans<DoubleVector>>(HamerlyKMeans.class) //
+                .with(KMeans.K_ID, 1) //
+                .with(KMeans.SEED_ID, 7) //
+                .build().autorun(db);
+        assertClusterSizes(result, new int[] { 1000 });
+    }
 }
-- 
2.14.2.windows.3

